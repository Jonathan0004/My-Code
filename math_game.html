<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Math Journey</title>
<style>
  :root {
    --primary: #007aff;
    --background-top: #f5f6fa;
    --background-bottom: #e2e4ea;
  }
  body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(to bottom, var(--background-top), var(--background-bottom));
    color: #333;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  .app-bar {
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding: 12px 20px;
    font-size: 20px;
    font-weight: 600;
    position: relative;
    z-index: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .score {
    font-size: 16px;
    font-weight: 400;
  }
  .high-score {
    font-size: 14px;
    color: #555;
  }
  #home {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }
  h1 {
    margin-top: 0;
    font-size: 32px;
    font-weight: 600;
  }
  .screen {
    flex: 1;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .screen.active {
    display: flex;
    animation: fadeIn 0.4s;
  }
  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    width: 100%;
    max-width: 600px;
  }
  .card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    padding: 30px 20px;
    text-align: center;
    font-size: 18px;
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: pointer;
  }
  .card:hover {
    transform: translateY(-6px) scale(1.03);
    box-shadow: 0 12px 24px rgba(0,0,0,0.12);
  }
  #game {
    flex: 1;
    display: none;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    position: relative;
  }
  #level-display {
    font-size: 24px;
    margin-bottom: 20px;
  }
  #question {
    font-size: 28px;
    margin-bottom: 20px;
  }
  #answer {
    font-size: 24px;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    text-align: center;
    width: 200px;
  }
  .btn {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    border: none;
    border-radius: 8px;
    background: #007aff;
    color: #fff;
    cursor: pointer;
    transition: background 0.2s;
  }
  .btn:active {
    background: #0051c7;
  }
  .back-btn {
    background: #ccc;
    color: #333;
    margin-top: 10px;
  }
  #progress-container {
    width: 100%;
    max-width: 220px;
    height: 8px;
    background: #e1e1e1;
    border-radius: 4px;
    margin-top: 16px;
    overflow: hidden;
  }
  #progress-bar {
    height: 100%;
    width: 0;
    background: var(--primary);
    transition: width 0.3s;
  }
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2;
  }
  .overlay.show {
    display: flex;
    animation: fadeIn 0.3s forwards;
  }
  .overlay .message {
    background: #fff;
    padding: 40px 60px;
    border-radius: 12px;
    font-size: 28px;
    font-weight: 600;
    color: var(--primary);
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    animation: pop 0.5s forwards;
  }
  .shake {
    animation: shake 0.4s;
  }
  @keyframes shake {
    0%,100% { transform: translateX(0); }
    25% { transform: translateX(-6px); }
    50% { transform: translateX(6px); }
    75% { transform: translateX(-6px); }
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes pop {
    from { transform: scale(0.8); }
    to { transform: scale(1); }
  }
</style>
</head>
<body>
<div class="app-bar">
  <span>Math Journey</span>
  <div>
    <span class="high-score" id="high-score">High Score: 0</span>
    <span class="score" id="score">Score: 0</span>
  </div>
</div>
<div id="home" class="screen active">
  <h1>Select a Subject</h1>
  <div class="card-grid">
    <div class="card" data-subject="addition">Addition</div>
    <div class="card" data-subject="subtraction">Subtraction</div>
    <div class="card" data-subject="multiplication">Multiplication</div>
    <div class="card" data-subject="division">Division</div>
    <div class="card" data-subject="sqrt">Square Roots</div>
  </div>
</div>
<div id="game" class="screen">
  <div id="level-display">Level <span id="level">1</span></div>
  <div id="question">Question</div>
  <input id="answer" type="number" placeholder="Your answer">
  <div id="progress-container"><div id="progress-bar"></div></div>
  <button class="btn" id="submit">Submit</button>
  <button class="btn back-btn" id="back">Back</button>
  <div id="overlay" class="overlay"><div class="message">Level Up!</div></div>
</div>
<script>
const subjects = {
  addition: {
    name: 'Addition',
    generate: (max) => {
      const a = Math.floor(Math.random() * max);
      const b = Math.floor(Math.random() * max);
      return { text: `${a} + ${b}`, result: a + b };
    }
  },
  subtraction: {
    name: 'Subtraction',
    generate: (max) => {
      let a = Math.floor(Math.random() * max);
      let b = Math.floor(Math.random() * max);
      if (b > a) [a, b] = [b, a];
      return { text: `${a} - ${b}`, result: a - b };
    }
  },
  multiplication: {
    name: 'Multiplication',
    generate: (max) => {
      const a = Math.floor(Math.random() * (max / 2));
      const b = Math.floor(Math.random() * (max / 2));
      return { text: `${a} × ${b}`, result: a * b };
    }
  },
  division: {
    name: 'Division',
    generate: (max) => {
      const b = Math.floor(Math.random() * (max / 2)) + 1;
      const result = Math.floor(Math.random() * (max / 2));
      const a = b * result;
      return { text: `${a} ÷ ${b}`, result };
    }
  },
  sqrt: {
    name: 'Square Roots',
    generate: (max) => {
      const result = Math.floor(Math.random() * (max / 2)) + 1;
      const a = result * result;
      return { text: `√${a}`, result };
    }
  }
};

let currentSubject = null;
let level = 1;
let score = 0;
let questionsAnswered = 0;
let currentQuestion = null;

const scoreEl = document.getElementById('score');
const highScoreEl = document.getElementById('high-score');
const homeEl = document.getElementById('home');
const gameEl = document.getElementById('game');
const questionEl = document.getElementById('question');
const levelEl = document.getElementById('level');
const answerEl = document.getElementById('answer');
const progressBar = document.getElementById('progress-bar');
const overlay = document.getElementById('overlay');

let highScore = parseInt(localStorage.getItem('math-high-score') || '0', 10);
highScoreEl.textContent = `High Score: ${highScore}`;

function showScreen(el) {
  homeEl.classList.remove('active');
  gameEl.classList.remove('active');
  el.classList.add('active');
}

function updateScore() {
  scoreEl.textContent = `Score: ${score}`;
}

function updateProgress() {
  const progress = (questionsAnswered % 5) / 5 * 100;
  progressBar.style.width = progress + '%';
}

function nextQuestion() {
  const max = 10 + level * 10;
  currentQuestion = currentSubject.generate(max);
  questionEl.textContent = currentQuestion.text;
  answerEl.value = '';
  answerEl.focus();
  updateProgress();
}

function startSubject(id) {
  currentSubject = subjects[id];
  level = 1;
  score = 0;
  questionsAnswered = 0;
  updateScore();
  levelEl.textContent = level;
  showScreen(gameEl);
  updateProgress();
  nextQuestion();
}

function submitAnswer() {
  const value = parseInt(answerEl.value, 10);
  if (isNaN(value)) return;
  if (value === currentQuestion.result) {
    score += 10;
    questionsAnswered += 1;
    if (questionsAnswered % 5 === 0) {
      level += 1;
      levelEl.textContent = level;
      overlay.classList.add('show');
      setTimeout(() => overlay.classList.remove('show'), 1000);
    }
    if (score > highScore) {
      highScore = score;
      localStorage.setItem('math-high-score', highScore);
      highScoreEl.textContent = `High Score: ${highScore}`;
    }
  } else {
    answerEl.classList.add('shake');
    setTimeout(() => answerEl.classList.remove('shake'), 400);
  }
  updateScore();
  nextQuestion();
}

function backToHome() {
  showScreen(homeEl);
}

document.querySelectorAll('.card').forEach(card => {
  card.addEventListener('click', () => startSubject(card.dataset.subject));
});

document.getElementById('submit').addEventListener('click', submitAnswer);

document.getElementById('back').addEventListener('click', backToHome);

answerEl.addEventListener('keyup', (e) => {
  if (e.key === 'Enter') submitAnswer();
});
</script>
</body>
</html>
